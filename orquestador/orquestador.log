nohup: ignoring input
INFO:     Will watch for changes in these directories: ['/home/ubuntu/red_contenedores/orquestador']
INFO:     Uvicorn running on http://0.0.0.0:5807 (Press CTRL+C to quit)
INFO:     Started reloader process [1427751] using StatReload
ğŸš€ Iniciando API del Orquestador...
ğŸ“ Puerto: 5807
ğŸ”— URL: http://localhost:5807
ğŸ“š Docs: http://localhost:5807/docs
INFO:     Started server process [1427779]
INFO:     Waiting for application startup.
INFO:     Application startup complete.

ğŸ¯ INICIANDO DESPLIEGUE COMPLETO DE SLICE
ğŸ“ Slice ID: 2

ğŸ“‹ PASO 1: Procesando configuraciÃ³n de topologÃ­a...
ğŸ“‚ Leyendo archivo de entrada: /tmp/tmpu8cg7bc5.json
âœ… Archivo cargado correctamente
ğŸ”„ Pre-procesando JSON para completar campos faltantes...
âœ… Pre-procesamiento completado

ğŸ—ï¸ Procesando 1 topologÃ­a(s)...

ğŸ“ Procesando topologÃ­a 1: lineal
   Enlaces generados: []
   VM vm-test-2: VLANs 

ğŸ–¥ï¸ Asignando puertos VNC...

âœ… Procesamiento completado
VLANs utilizadas: 16;15

ğŸ’¾ Archivo guardado: /tmp/tmpf2vl1f_z.json
âœ… TopologÃ­a procesada exitosamente (0.00s)
   â€¢ 1 topologÃ­as
   â€¢ 1 VMs
   â€¢ VLANs usadas: 16;15

ğŸŒ PASO 2: Creando namespaces DHCP...

ğŸŒ Creando namespaces DHCP para slice 2
VLANs: 16;15, Bridge: br-cloud
   ğŸš€ Ejecutando net_create.sh para rango completo 16;15...
   ğŸ“‹ Salida del comando: ERROR: El VLAN inicial no puede ser mayor que el final
   âœ… net_create.sh ejecutado para 0 VLANs
   â³ Esperando que net_create.sh complete el setup...
âœ… Namespaces DHCP creados exitosamente (5.13s)
   â€¢ 0 VLANs configuradas

ğŸš€ PASO 3: Desplegando VMs en workers...

ğŸš€ Desplegando VMs para slice 2

ğŸ“ Desplegando topologÃ­a: lineal
   Desplegando vm-test-2 en worker1...
   âŒ Error desplegando vm-test-2: Error desplegando VM vm-test-2: {"detail":"Formato de VLANs invÃ¡lido"}
ğŸ Despliegue VMs completado (0.07s)
   â€¢ 0 VMs desplegadas exitosamente
   â€¢ 1 VMs fallidas

ğŸ” PASO 4: VerificaciÃ³n final del despliegue...

ğŸ” VERIFICACIÃ“N FINAL del slice 2
ğŸ“‹ Listando namespaces...
   Namespaces encontrados: ['id2-ns21 (id: 16)', 'id2-ns20 (id: 15)', 'id2-ns19 (id: 14)', 'id2-ns18 (id: 13)', 'id2-ns17 (id: 12)', 'id2-ns16 (id: 9)']
ğŸ“‹ Listando procesos dnsmasq...
   Procesos dnsmasq encontrados: ['1343596', '1343643', '1343695', '1343737', '1343769', '1343798']
ğŸ“‹ Listando puertos OVS...
   Puertos OVS encontrados: ['id2-gw16', 'id2-gw17', 'id2-gw18', 'id2-gw19', 'id2-gw20', 'id2-gw21', 'id2-vovs16', 'id2-vovs17', 'id2-vovs18', 'id2-vovs19', 'id2-vovs20', 'id2-vovs21']

ğŸ“Š Resumen verificaciÃ³n:
   â€¢ Namespaces: 6/0
   â€¢ Procesos dnsmasq: 6
   â€¢ Puertos OVS: 12
âœ… VerificaciÃ³n exitosa - Infraestructura DHCP operativa
âœ… VerificaciÃ³n final exitosa (0.27s)

ğŸ‰ DESPLIEGUE COMPLETADO (5.47s)
Status: Ã‰XITO PARCIAL
Mensaje: Slice 2 desplegado y verificado exitosamente - 0/1 VMs
INFO:     172.18.0.4:58366 - "POST /desplegar-slice HTTP/1.1" 200 OK

ğŸ¯ INICIANDO DESPLIEGUE COMPLETO DE SLICE
ğŸ“ Slice ID: 3

ğŸ“‹ PASO 1: Procesando configuraciÃ³n de topologÃ­a...
ğŸ“‚ Leyendo archivo de entrada: /tmp/tmptdrlgrls.json
âœ… Archivo cargado correctamente
ğŸ”„ Pre-procesando JSON para completar campos faltantes...
âœ… Pre-procesamiento completado

ğŸ—ï¸ Procesando 3 topologÃ­a(s)...

ğŸ“ Procesando topologÃ­a 1: anillo
   Enlaces generados: [(1, 2), (2, 3), (3, 1)]
   VM vm1: VLANs 31,33
   VM vm2: VLANs 31,32
   VM vm3: VLANs 999,32,33

ğŸ“ Procesando topologÃ­a 2: lineal
   Enlaces generados: [(1, 2), (2, 3), (3, 4)]
   VM vm4: VLANs 34
   VM vm5: VLANs 999,34,35
   VM vm6: VLANs 35,36
   VM vm7: VLANs 999,36

ğŸ“ Procesando topologÃ­a 3: anillo
   Enlaces generados: [(1, 2), (2, 3), (3, 4), (4, 5), (5, 1)]
   VM vm8: VLANs 999,37,41
   VM vm9: VLANs 999,37,38
   VM vm10: VLANs 38,39
   VM vm11: VLANs 999,39,40
   VM vm12: VLANs 40,41

ğŸ”— Procesando conexiones inter-topologÃ­a: vm3-vm4;vm7-vm9
   ConexiÃ³n vm3 â†” vm4: VLAN 42
   ConexiÃ³n vm7 â†” vm9: VLAN 43

ğŸ–¥ï¸ Asignando puertos VNC...

âœ… Procesamiento completado
VLANs utilizadas: 31;43

ğŸ’¾ Archivo guardado: /tmp/tmpcvno1896.json
âœ… TopologÃ­a procesada exitosamente (0.00s)
   â€¢ 3 topologÃ­as
   â€¢ 12 VMs
   â€¢ VLANs usadas: 31;43

ğŸŒ PASO 2: Creando namespaces DHCP...

ğŸŒ Creando namespaces DHCP para slice 3
VLANs: 31;43, Bridge: br-cloud
   ğŸš€ Ejecutando net_create.sh para rango completo 31;43...
   ğŸ“‹ Salida del comando: Timeout ejecutando comando
   âœ… net_create.sh ejecutado para 13 VLANs
   â³ Esperando que net_create.sh complete el setup...
âœ… Namespaces DHCP creados exitosamente (35.00s)
   â€¢ 13 VLANs configuradas

ğŸš€ PASO 3: Desplegando VMs en workers...

ğŸš€ Desplegando VMs para slice 3

ğŸ“ Desplegando topologÃ­a: anillo
   Desplegando vm1 en worker1...
   âœ… vm1 desplegada exitosamente
   Desplegando vm2 en worker2...
   âœ… vm2 desplegada exitosamente
   Desplegando vm3 en worker3...
   âœ… vm3 desplegada exitosamente

ğŸ“ Desplegando topologÃ­a: lineal
   Desplegando vm4 en worker1...
   âœ… vm4 desplegada exitosamente
   Desplegando vm5 en worker2...
   âœ… vm5 desplegada exitosamente
   Desplegando vm6 en worker3...
   âœ… vm6 desplegada exitosamente
   Desplegando vm7 en worker1...
   âœ… vm7 desplegada exitosamente

ğŸ“ Desplegando topologÃ­a: anillo
   Desplegando vm8 en worker2...
   âœ… vm8 desplegada exitosamente
   Desplegando vm9 en worker3...
   âœ… vm9 desplegada exitosamente
   Desplegando vm10 en worker1...
   âœ… vm10 desplegada exitosamente
   Desplegando vm11 en worker2...
   âœ… vm11 desplegada exitosamente
   Desplegando vm12 en worker3...
   âœ… vm12 desplegada exitosamente
ğŸ Despliegue VMs completado (42.45s)
   â€¢ 12 VMs desplegadas exitosamente
   â€¢ 0 VMs fallidas

ğŸ” PASO 4: VerificaciÃ³n final del despliegue...

ğŸ” VERIFICACIÃ“N FINAL del slice 3
ğŸ“‹ Listando namespaces...
   Namespaces encontrados: ['id3-ns43 (id: 34)', 'id3-ns42 (id: 33)', 'id3-ns41 (id: 32)', 'id3-ns40 (id: 31)', 'id3-ns39 (id: 30)', 'id3-ns38 (id: 29)', 'id3-ns37 (id: 28)', 'id3-ns36 (id: 27)', 'id3-ns35 (id: 26)', 'id3-ns34 (id: 25)', 'id3-ns33 (id: 24)', 'id3-ns32 (id: 23)', 'id3-ns31 (id: 22)']
ğŸ“‹ Listando procesos dnsmasq...
   Procesos dnsmasq encontrados: ['1429055', '1429099', '1429143', '1429175', '1429204', '1429250', '1429294', '1429323', '1429352', '1429398', '1429444', '1429473', '1429522']
ğŸ“‹ Listando puertos OVS...
   Puertos OVS encontrados: ['id3-gw31', 'id3-gw32', 'id3-gw33', 'id3-gw34', 'id3-gw35', 'id3-gw36', 'id3-gw37', 'id3-gw38', 'id3-gw39', 'id3-gw40', 'id3-gw41', 'id3-gw42', 'id3-gw43', 'id3-vovs31', 'id3-vovs32', 'id3-vovs33', 'id3-vovs34', 'id3-vovs35', 'id3-vovs36', 'id3-vovs37', 'id3-vovs38', 'id3-vovs39', 'id3-vovs40', 'id3-vovs41', 'id3-vovs42', 'id3-vovs43']

ğŸ“Š Resumen verificaciÃ³n:
   â€¢ Namespaces: 13/13
   â€¢ Procesos dnsmasq: 13
   â€¢ Puertos OVS: 26
âœ… VerificaciÃ³n exitosa - Infraestructura DHCP operativa
âœ… VerificaciÃ³n final exitosa (0.23s)

ğŸ‰ DESPLIEGUE COMPLETADO (77.69s)
Status: Ã‰XITO TOTAL
Mensaje: Slice 3 desplegado y verificado exitosamente - 12/12 VMs
INFO:     172.18.0.4:42008 - "POST /desplegar-slice HTTP/1.1" 200 OK
WARNING:  StatReload detected changes in 'orquestador_api.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [1427779]
Exception ignored in: <function BaseSubprocessTransport.__del__ at 0x797e725d0180>
Traceback (most recent call last):
  File "/usr/lib/python3.12/asyncio/base_subprocess.py", line 126, in __del__
    self.close()
  File "/usr/lib/python3.12/asyncio/base_subprocess.py", line 104, in close
    proto.pipe.close()
  File "/usr/lib/python3.12/asyncio/unix_events.py", line 568, in close
    self._close(None)
  File "/usr/lib/python3.12/asyncio/unix_events.py", line 592, in _close
    self._loop.call_soon(self._call_connection_lost, exc)
  File "/usr/lib/python3.12/asyncio/base_events.py", line 795, in call_soon
    self._check_closed()
  File "/usr/lib/python3.12/asyncio/base_events.py", line 541, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed
INFO:     Started server process [1434744]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  StatReload detected changes in 'orquestador_api.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [1434744]
INFO:     Started server process [1434764]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  StatReload detected changes in 'orquestador_api.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [1434764]
INFO:     Started server process [1434865]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  StatReload detected changes in 'orquestador_api.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [1434865]
INFO:     Started server process [1434901]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  StatReload detected changes in 'orquestador_api.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [1434901]
INFO:     Started server process [1434921]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     127.0.0.1:58406 - "POST /desplegar-slice HTTP/1.1" 422 Unprocessable Entity
INFO:     127.0.0.1:35786 - "POST /desplegar-slice HTTP/1.1" 422 Unprocessable Entity
Traceback (most recent call last):
  File "/home/ubuntu/red_contenedores/orquestador/backupp/calculo.py", line 227, in fill_json
    config = self.pre_process_json(config)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ubuntu/red_contenedores/orquestador/backupp/calculo.py", line 182, in pre_process_json
    slice_id = int(config['id_slice'])
               ^^^^^^^^^^^^^^^^^^^^^^^
ValueError: invalid literal for int() with base 10: 'test-internet-slice-001'
Traceback (most recent call last):
  File "/home/ubuntu/red_contenedores/orquestador/orquestador_api.py", line 685, in desplegar_slice
    assigner.fill_json(temp_input_path, temp_output_path)
  File "/home/ubuntu/red_contenedores/orquestador/backupp/calculo.py", line 227, in fill_json
    config = self.pre_process_json(config)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ubuntu/red_contenedores/orquestador/backupp/calculo.py", line 182, in pre_process_json
    slice_id = int(config['id_slice'])
               ^^^^^^^^^^^^^^^^^^^^^^^
ValueError: invalid literal for int() with base 10: 'test-internet-slice-001'

ğŸ¯ INICIANDO DESPLIEGUE COMPLETO DE SLICE
ğŸ“ Slice ID: test-internet-slice-001

ğŸ“‹ PASO 1: Procesando configuraciÃ³n de topologÃ­a...
ğŸ“‚ Leyendo archivo de entrada: /tmp/tmp89ikxcza.json
âœ… Archivo cargado correctamente
ğŸ”„ Pre-procesando JSON para completar campos faltantes...
âŒ Error: invalid literal for int() with base 10: 'test-internet-slice-001'
âŒ Error en despliegue: invalid literal for int() with base 10: 'test-internet-slice-001'
INFO:     127.0.0.1:38122 - "POST /desplegar-slice HTTP/1.1" 200 OK
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [1434921]
INFO:     Stopping reloader process [1427751]
