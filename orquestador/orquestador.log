nohup: ignoring input
INFO:     Will watch for changes in these directories: ['/home/ubuntu/red_contenedores/orquestador']
INFO:     Uvicorn running on http://0.0.0.0:5807 (Press CTRL+C to quit)
INFO:     Started reloader process [1392131] using StatReload
ğŸš€ Iniciando API del Orquestador...
ğŸ“ Puerto: 5807
ğŸ”— URL: http://localhost:5807
ğŸ“š Docs: http://localhost:5807/docs
INFO:     Started server process [1392147]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     127.0.0.1:53856 - "GET /health HTTP/1.1" 200 OK
Traceback (most recent call last):
  File "/home/ubuntu/red_contenedores/orquestador/venv_api/lib/python3.12/site-packages/mysql/connector/network.py", line 600, in open_connection
    self.sock.connect(sockaddr)
ConnectionRefusedError: [Errno 111] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ubuntu/red_contenedores/orquestador/orquestador_api.py", line 116, in update_slice_database
    connection = mysql.connector.connect(**db_config)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ubuntu/red_contenedores/orquestador/venv_api/lib/python3.12/site-packages/mysql/connector/pooling.py", line 294, in connect
    return MySQLConnection(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ubuntu/red_contenedores/orquestador/venv_api/lib/python3.12/site-packages/mysql/connector/connection.py", line 164, in __init__
    self.connect(**kwargs)
  File "/home/ubuntu/red_contenedores/orquestador/venv_api/lib/python3.12/site-packages/mysql/connector/abstracts.py", line 1181, in connect
    self._open_connection()
  File "/home/ubuntu/red_contenedores/orquestador/venv_api/lib/python3.12/site-packages/mysql/connector/connection.py", line 570, in _open_connection
    self._socket.open_connection()
  File "/home/ubuntu/red_contenedores/orquestador/venv_api/lib/python3.12/site-packages/mysql/connector/network.py", line 602, in open_connection
    raise InterfaceError(
mysql.connector.errors.InterfaceError: 2003: Can't connect to MySQL server on 'localhost:3307' (111 Connection refused)

ğŸ¯ INICIANDO DESPLIEGUE COMPLETO DE SLICE
ğŸ“ Slice ID: 13

ğŸ“‹ PASO 1: Procesando configuraciÃ³n de topologÃ­a...
ğŸ“‚ Leyendo archivo de entrada: /tmp/tmp8zg0p6b6.json
âœ… Archivo cargado correctamente
ğŸ”„ Pre-procesando JSON para completar campos faltantes...
âœ… Pre-procesamiento completado

ğŸ—ï¸ Procesando 1 topologÃ­a(s)...

ğŸ“ Procesando topologÃ­a 1: lineal
   Enlaces generados: []
   VM vm-test: VLANs 

ğŸ–¥ï¸ Asignando puertos VNC...

âœ… Procesamiento completado
VLANs utilizadas: 181;180

ğŸ’¾ Archivo guardado: /tmp/tmpl2k90vzr.json
âœ… TopologÃ­a procesada exitosamente (0.00s)
   â€¢ 1 topologÃ­as
   â€¢ 1 VMs
   â€¢ VLANs usadas: 181;180

ğŸŒ PASO 2: Creando namespaces DHCP...

ğŸŒ Creando namespaces DHCP para slice 13
VLANs: 181;180, Bridge: br-cloud
   ğŸš€ Ejecutando net_create.sh para rango completo 181;180...
   ğŸ“‹ Salida del comando: ERROR: El VLAN inicial no puede ser mayor que el final
[sudo] password for ubuntu:
   âœ… net_create.sh ejecutado para 0 VLANs
   â³ Esperando que net_create.sh complete el setup...
âœ… Namespaces DHCP creados exitosamente (5.13s)
   â€¢ 0 VLANs configuradas

ğŸš€ PASO 3: Desplegando VMs en workers...

ğŸš€ Desplegando VMs para slice 13

ğŸ“ Desplegando topologÃ­a: lineal
   Desplegando vm-test en worker1...
   âŒ Error desplegando vm-test: Error desplegando VM vm-test: {"detail":"Formato de VLANs invÃ¡lido"}
ğŸ Despliegue VMs completado (0.06s)
   â€¢ 0 VMs desplegadas exitosamente
   â€¢ 1 VMs fallidas

ğŸ” PASO 4: VerificaciÃ³n final del despliegue...

ğŸ” VERIFICACIÃ“N FINAL del slice 13
ğŸ“‹ Listando namespaces...
   Namespaces encontrados: []
ğŸ“‹ Listando procesos dnsmasq...
ğŸ“‹ Listando puertos OVS...

ğŸ“Š Resumen verificaciÃ³n:
   â€¢ Namespaces: 0/0
   â€¢ Procesos dnsmasq: 0
   â€¢ Puertos OVS: 0
âœ… VerificaciÃ³n exitosa - Infraestructura DHCP operativa
âœ… VerificaciÃ³n final exitosa (0.17s)

ğŸ‰ DESPLIEGUE COMPLETADO (5.37s)
Status: Ã‰XITO PARCIAL
Mensaje: Slice 13 desplegado y verificado exitosamente - 0/1 VMs
ğŸ“ Actualizando base de datos para slice 13...
âŒ Error actualizando base de datos para slice 13: 2003: Can't connect to MySQL server on 'localhost:3307' (111 Connection refused)
âš ï¸ Warning: No se pudo actualizar la BD para slice 13
INFO:     172.18.0.4:34596 - "POST /desplegar-slice HTTP/1.1" 200 OK
WARNING:  StatReload detected changes in 'orquestador_api.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [1392147]
INFO:     Started server process [1393063]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  StatReload detected changes in 'orquestador_api.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [1393063]
INFO:     Started server process [1393078]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  StatReload detected changes in 'orquestador_api.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [1393078]
INFO:     Started server process [1393087]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [1393087]
INFO:     Stopping reloader process [1392131]
